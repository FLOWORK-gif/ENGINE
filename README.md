## **Apa Itu FlowForge?**

FlowForge adalah aplikasi desktop revolusioner berbasis Python yang berfungsi sebagai **Orkestrator Alur Kerja Universal**. Ia dirancang untuk membantu Anda mengotomatisasi, mengorkestrasi, dan mengelola berbagai proses digital dan tugas berulang dengan antarmuka grafis yang intuitif (GUI). Lupakan tugas-tugas manual yang membosankan dan rentan kesalahan – FlowForge memungkinkan Anda merancang "alur kerja" yang cerdas dengan serangkaian langkah, kondisi, dan pemicu, semuanya tanpa perlu menulis baris kode yang rumit.

Bayangkan memiliki asisten digital pribadi yang bekerja tanpa lelah, 24/7, mengikuti setiap instruksi yang Anda berikan. Itulah FlowForge.

### **Mengapa FlowForge?**

  * **Gratis ** Akses penuh ke semua fitur dan kode sumber tanpa biaya. Kami percaya pada kekuatan komunitas dan transparansi.
  * **Intuitif & Mudah Digunakan:** Desain antarmuka yang bersih dan user-friendly memungkinkan bahkan pemula sekalipun untuk mulai membangun alur kerja dalam hitungan menit.
  * **Sangat Fleksibel:** Dirancang untuk menangani beragam skenario, dari automasi sederhana hingga orkestrasi proses yang kompleks.
  * **Ekstensibilitas Tanpa Batas:** Dengan sistem plugin yang modular, FlowForge dapat tumbuh dan beradaptasi dengan kebutuhan Anda. Buat plugin sendiri, gunakan yang sudah ada, atau jelajahi pasar plugin kami\!
  * **Kontrol Penuh:** Lacak setiap aktivitas dengan log terperinci, riwayat eksekusi, dan manajemen pengaturan yang komprehensif.

## **Fitur Utama FlowForge**

FlowForge hadir dengan serangkaian fitur tangguh yang dirancang untuk memaksimalkan efisiensi dan produktivitas Anda:

### 1\. **Dashboard yang Informatif & Interaktif**

Dashboard adalah pusat kendali Anda, memberikan gambaran sekilas tentang aktivitas aplikasi dan memungkinkan Anda berinteraksi dengan konten dinamis:

  * **Log Aplikasi:** Sebuah tabel yang menampilkan semua aktivitas dan pesan log dari seluruh sistem FlowForge secara real-time. Dilengkapi dengan filter level (INFO, WARNING, ERROR, CRITICAL, DEBUG) dan fungsi pencarian teks untuk memudahkan diagnosa. Anda juga bisa membersihkan tampilan log ini kapan saja.

### 2\. **Workflow Editor yang Kuat**

Desain alur kerja Anda dengan mudah menggunakan antarmuka seret dan lepas yang intuitif:

  * **Langkah Plugin:** Tambahkan plugin yang tersedia sebagai langkah-langkah dalam alur kerja Anda. Setiap plugin memiliki fungsi spesifik yang dapat Anda konfigurasikan.
  * **Langkah Kondisional (IF/ELSE):** Buat alur kerja yang cerdas dengan menambahkan kondisi logis. Alur kerja dapat mengambil cabang yang berbeda berdasarkan status plugin sebelumnya, data artikel, data global alur kerja, pengaturan aplikasi, atau bahkan informasi dari pemicu file.
  * **Penanganan Kegagalan (On-Failure Steps):** Definisikan langkah-langkah alternatif yang akan dijalankan jika sebuah plugin gagal. Ini meningkatkan ketahanan alur kerja Anda.
  * **Preset Workflow:** Simpan alur kerja yang Anda buat sebagai preset untuk penggunaan kembali yang cepat. Muat, simpan, dan hapus preset dengan mudah.
  * **Mode Eksekusi Berulang:**
      * **Terus-menerus (Infinite Loop):** Jalankan alur kerja tanpa batas hingga dihentikan secara manual.
      * **Terbatas (Finite Loop):** Ulangi alur kerja sejumlah kali yang ditentukan.
      * **Jeda (Delay):** Tentukan jeda waktu antara setiap eksekusi berulang untuk mencegah *overload* sistem atau mematuhi batasan *rate-limit*.
  * **Manajemen Plugin:** Unggah, edit, dan hapus file plugin langsung dari editor. Instal dependensi plugin di lingkungan virtual terisolasi.

### 3\. **Asset Manager yang Komprehensif**

Kelola semua aset media Anda dengan mudah:

  * **Kategori Aset Bawaan:** Folder terorganisir untuk Musik, Video Latar Belakang, Outro, Font, dan Gambar.
  * **Kategori Aset Kustom:** Buat kategori aset Anda sendiri dengan nama folder dan ekstensi file yang diizinkan sesuai kebutuhan proyek Anda.
  * **Manajemen File:** Tambahkan atau hapus file aset dari setiap kategori.
  * **Pratinjau Aset:** Lihat pratinjau gambar dan file audio langsung di aplikasi. Putar file audio untuk memverifikasi.

### 4\. **Scheduler yang Andal**

Jadwalkan alur kerja Anda untuk berjalan secara otomatis pada waktu yang ditentukan:

  * **Penjadwalan Fleksibel:** Atur alur kerja untuk berjalan setiap menit, setiap jam, atau setiap hari pada waktu tertentu.
  * **Manajemen Job:** Tambah, hapus, jeda, atau lanjutkan job terjadwal dengan mudah.
  * **Status Real-time:** Lihat kapan job berikutnya akan berjalan dan status *countdown* untuk setiap job.
  * **Kontrol Global:** Mulai atau hentikan seluruh sistem Scheduler aplikasi.

### 5\. **Pemicu Cerdas (Smart Triggers)**

Otomatisasi berdasarkan kejadian di sistem file Anda:

  * **Pemantauan Folder:** Atur FlowForge untuk memantau folder tertentu untuk deteksi file baru.
  * **Kondisi yang Dapat Dikustomisasi:** Tentukan aturan cerdas berdasarkan nama file (mengandung/tidak mengandung), ekstensi file, atau ukuran file (lebih besar/lebih kecil dari) untuk memicu alur kerja tertentu.
  * **Otomatisasi Instan:** Alur kerja akan secara otomatis berjalan saat file yang cocok dengan kondisi ditemukan di folder yang dipantau.
  * **Manajemen Aturan:** Tambah, edit, atau hapus aturan pemicu dengan antarmuka yang intuitif.

### 6\. **Pengaturan Aplikasi yang Terpusat**

Konfigurasi FlowForge sesuai preferensi Anda:

  * **Folder Output Utama:** Tentukan lokasi default untuk semua output dan data aplikasi Anda.
  * **Notifikasi Desktop:** Aktifkan notifikasi untuk sukses, kegagalan, atau saat job terjadwal berjalan.
  * **Variabel Global:** Kelola variabel dan rahasia yang dapat diakses oleh semua plugin dan alur kerja Anda, termasuk opsi enkripsi sederhana untuk data sensitif.

-----

## **Panduan Memulai Cepat**

1.  **Unduh & Instal:**

      * Kunjungi halaman [Rilis FlowForge di GitHub]([https://www.google.com/search?q=https://github.com/YOUR_GITHUB_USERNAME/FlowForge/releases](https://github.com/awenkolayaudico/flowfrog/releases/download/automation/FlowForg.exe)).
      * Unduh versi `.exe` terbaru yang sesuai dengan sistem operasi Windows Anda.
      * Ekstrak file jika diperlukan dan jalankan `FlowForge.exe`. Tidak perlu instalasi Python atau dependensi terpisah\!

2.  **Membangun Alur Kerja Pertama Anda:**

      * Buka tab "Workflow Editor".
      * Di bagian "Plugin Tersedia", pilih plugin yang ingin Anda gunakan (misalnya, `Example Plugin`).
      * Klik "Tambah Plugin \>" untuk menambahkannya ke "Langkah Workflow Saat Ini".
      * Pilih langkah yang baru ditambahkan di "Langkah Workflow Saat Ini" dan klik "Konfigurasi" untuk menyesuaikan pengaturannya (jika ada).
      * Ulangi proses ini untuk menambahkan lebih banyak langkah atau langkah kondisional.
      * Setelah selesai, klik tombol "START" di status bar bawah untuk menjalankan alur kerja Anda\!

3.  **Menjelajahi Fitur Lain:**

      * **Asset Manager:** Tambahkan musik, video, atau gambar yang akan Anda gunakan dalam alur kerja (misalnya, untuk plugin editor video).
      * **Scheduler:** Jadwalkan alur kerja yang sudah Anda buat untuk berjalan secara otomatis setiap hari, jam, atau menit.
      * **Pemicu:** Atur alur kerja untuk berjalan secara otomatis ketika sebuah file baru terdeteksi di folder tertentu.
      * **Setting:** Konfigurasi folder output utama, notifikasi, dan variabel global.
      * **Dashboard:** Pantau log aplikasi dan riwayat eksekusi.

-----

## **Panduan untuk Pengembang: Membuat Plugin FlowForge Anda Sendiri**

Salah satu kekuatan terbesar FlowForge adalah sistem pluginnya yang modular dan open-source. Ini berarti Anda dapat memperluas fungsionalitas FlowForge dengan menciptakan "blok bangunan" kustom yang sesuai dengan kebutuhan spesifik Anda atau kebutuhan komunitas.

### **Mengapa Membuat Plugin?**

  * **Kustomisasi Tanpa Batas:** Sesuaikan FlowForge untuk melakukan persis apa yang Anda inginkan.
  * **Otomatisasi Spesifik:** Buat plugin untuk berinteraksi dengan API tertentu, memproses jenis data unik, atau mengintegrasikan dengan aplikasi lain.
  * **Kontribusi Komunitas:** Bagikan plugin Anda dengan komunitas FlowForge lainnya.
  * **Pembelajaran & Eksperimen:** Pelajari lebih dalam tentang Python dan otomatisasi dengan membuat proyek nyata.

### **Struktur Direktori Plugin**

Setiap plugin FlowForge harus mengikuti struktur direktori dan file tertentu agar dapat dideteksi dan dimuat oleh `PluginManager`.

Asumsikan folder proyek FlowForge Anda adalah `FlowForge/`. Struktur plugin Anda akan terlihat seperti ini:

```
FlowForge/
├── plugins/
│   ├── KategoriPluginAnda/  <-- Folder kategori (contoh: "Web Automation", "Data Processing", "Utility")
│   │   ├── NamaPluginAnda/  <-- Folder spesifik untuk plugin Anda (contoh: "ArticleScraper", "TextFormatter", "EmailSender")
│   │   │   ├── __init__.py  <-- File kosong ini WAJIB ada
│   │   │   ├── nama_file_plugin_anda.py  <-- File Python utama plugin Anda
│   │   │   ├── plugin_manifest.json     <-- File JSON opsional tapi DIREKOMENDASIKAN
│   │   │   ├── requirements.txt         <-- File opsional jika plugin punya dependensi Python eksternal
│   │   │   └── .venv/                   <-- Folder virtual environment opsional untuk dependensi (dibuat otomatis)
│   │   └── __init__.py      <-- File kosong ini WAJIB ada di folder kategori
│   └── KategoriLain/
│       └── ...
└── app/
└── core/
└── ... (file-file FlowForge lainnya)
```

  * **`plugins/`:** Direktori utama tempat FlowForge mencari semua plugin.
  * **`KategoriPluginAnda/`:** Ini adalah sub-direktori yang berfungsi sebagai kategori logis untuk plugin Anda (misalnya, `Web Automation`, `Image Processing`, `Text Utility`). Anda dapat membuat kategori baru atau menempatkan plugin di kategori yang sudah ada. **Penting:** Setiap folder kategori harus memiliki file `__init__.py` kosong di dalamnya.
  * **`NamaPluginAnda/`:** Ini adalah direktori spesifik untuk plugin Anda. Namanya harus unik dan merepresentasikan fungsi plugin. Contoh: `YoutubeDownloader`, `PDFTextExtractor`.
  * **`__init__.py` (di dalam `NamaPluginAnda/`):** File kosong ini wajib ada untuk menandai `NamaPluginAnda` sebagai paket Python. Tanpa ini, Python tidak akan mengenalinya sebagai modul yang dapat diimpor.
  * **`nama_file_plugin_anda.py`:** Ini adalah file Python utama yang berisi kelas plugin Anda. Nama filenya harus unik dalam folder plugin tersebut. Nama ini akan menjadi modul yang diimpor oleh FlowForge (misalnya, jika folder `NamaPluginAnda` berisi `my_plugin.py`, maka FlowForge akan mencoba mengimpor `my_plugin`).
  * **`plugin_manifest.json` (Opsional, tapi Sangat Direkomendasikan):** File JSON ini berisi metadata tentang plugin Anda seperti nama tampilan, deskripsi panjang, pengembang, versi, dan izin yang diperlukan. FlowForge akan menampilkan informasi ini di UI, terutama di Workflow Editor dan Marketplace.
  * **`requirements.txt` (Opsional):** Jika plugin Anda bergantung pada pustaka Python pihak ketiga yang tidak termasuk dalam instalasi FlowForge standar (misalnya, `selenium`, `beautifulsoup4`, `opencv-python`), daftarkan di sini. FlowForge akan menginstal dependensi ini secara otomatis ke dalam virtual environment terisolasi untuk plugin Anda.
  * **`.venv/`:** Ini adalah folder virtual environment yang akan dibuat secara otomatis oleh FlowForge saat dependensi plugin diinstal. Anda tidak perlu membuat atau mengelolanya secara manual.

### **Kelas `BasePlugin` (Antarmuka Plugin)**

Semua plugin harus mewarisi dari kelas abstrak `BasePlugin` yang terletak di `plugins/base_plugin.py`. Ini memastikan plugin Anda memiliki struktur yang benar dan dapat berinteraksi dengan FlowForge.

Anda harus mengimplementasikan metode abstrak berikut:

#### **1. `__init__(self, name: str, description: str)` (Wajib)**

  * **Tujuan:** Konstruktor untuk plugin Anda. Ini adalah tempat Anda memberikan nama dan deskripsi singkat kepada plugin, serta menginisialisasi pengaturan default internal.

  * **Parameter:**

      * `name` (str): Nama tampilan unik plugin Anda. Ini yang akan muncul di daftar plugin di FlowForge UI. **Penting: Pastikan nama ini sama persis dengan nilai `plugin_name` di `plugin_manifest.json` Anda.**
      * `description` (str): Deskripsi singkat (satu baris) tentang fungsi utama plugin Anda. Ini akan terlihat di daftar plugin yang tersedia.

  * **Contoh:**

    ```python
    # Di dalam nama_file_plugin_anda.py
    from plugins.base_plugin import BasePlugin
    # ... impor lainnya ...

    class MyCustomPlugin(BasePlugin):
        def __init__(self):
            super().__init__(name="Pembaca Teks PDF", description="Membaca teks dari file PDF.")
            # Inisialisasi pengaturan default
            self.settings = {
                "input_filepath": "",
                "halaman_tertentu": "all" # Contoh: '1,3,5' atau 'all'
            }
    ```

#### **2. `get_gui_config_spec(self) -> List[PluginSettingSpec]` (Wajib)**

  * **Tujuan:** Metode ini memberitahu FlowForge bagaimana membangun antarmuka pengguna (UI) untuk mengkonfigurasi pengaturan plugin Anda di "Workflow Editor". Anda mendefinisikan jenis input apa yang dibutuhkan plugin Anda dari pengguna (teks, angka, file, dropdown, dll.).

  * **Parameter:** Tidak ada (metode `self`).

  * **Mengembalikan:** Sebuah `List` dari objek `PluginSettingSpec`. Setiap `PluginSettingSpec` mendefinisikan satu pengaturan konfigurasi yang dapat diatur oleh pengguna di GUI.

  * **Objek `PluginSettingSpec` memiliki atribut penting:**

      * `field_name` (str): Nama unik untuk pengaturan ini. Ini akan menjadi kunci yang digunakan untuk mengakses nilai pengaturan di dalam metode `run()` Anda (misalnya, `self.settings["field_name"]`).
      * `label` (str): Teks yang akan ditampilkan di GUI sebagai label untuk input ini (misalnya, "Jalur File Input:").
      * `type` (str): Jenis input di GUI. Pilihan yang tersedia:
          * `"str"`: Input teks biasa (string).
          * `"multiline_text"`: Area teks dengan banyak baris (untuk input teks panjang).
          * `"int"`: Input angka bulat.
          * `"float"`: Input angka desimal.
          * `"bool"`: Checkbox (True/False).
          * `"dropdown"`: Kotak dropdown dengan pilihan yang ditentukan oleh `options`.
          * `"filepath"`: Input jalur file dengan tombol "Jelajahi..." untuk memilih file.
          * `"folderpath"`: Input jalur folder dengan tombol "Jelajahi..." untuk memilih folder.
          * `"button"`: Tombol interaktif di panel pengaturan (jarang digunakan di sini).
      * `default` (Any, opsional): Nilai default untuk pengaturan ini jika pengguna tidak mengaturnya.
      * `placeholder` (Optional[str], opsional): Teks abu-abu yang muncul di input sebelum pengguna mengetik.
      * `options` (Optional[List[str]], opsional): Diperlukan jika `type` adalah `"dropdown"`. Berisi daftar string pilihan untuk dropdown.
      * `tooltip` (Optional[str], opsional): Teks bantuan yang muncul saat kursor diarahkan ke input.
      * `required` (bool, opsional, default `False`): Jika `True`, pengguna harus mengisi pengaturan ini sebelum alur kerja dapat dijalankan.
      * `command` (Optional[Callable], opsional): Fungsi callback yang akan dijalankan jika `type` adalah `"button"`.

  * **Contoh:**

    ```python
    # Di dalam nama_file_plugin_anda.py
    from plugins.base_plugin import BasePlugin
    from core.data_models import PluginSettingSpec # WAJIB diimpor
    from typing import List, Any # Untuk List dan Any pada type hinting

    class MyCustomPlugin(BasePlugin):
        # ... __init__ seperti sebelumnya ...

        def get_gui_config_spec(self) -> List[PluginSettingSpec]:
            return [
                PluginSettingSpec(
                    field_name="url_sumber",
                    label="URL Sumber Data",
                    type="str",
                    default="https://example.com",
                    placeholder="Contoh: https://www.website.com/data",
                    tooltip="URL dari mana plugin akan mengambil data.",
                    required=True
                ),
                PluginSettingSpec(
                    field_name="mode_pengambilan",
                    label="Mode Pengambilan",
                    type="dropdown",
                    options=["Full Page", "Specific Element"],
                    default="Full Page",
                    tooltip="Pilih apakah mengambil seluruh halaman atau elemen tertentu."
                ),
                PluginSettingSpec(
                    field_name="css_selector",
                    label="CSS Selector (Opsional)",
                    type="str",
                    default="",
                    placeholder="#main-content .item-class",
                    tooltip="CSS Selector jika mode pengambilan adalah 'Specific Element'.",
                    required=False
                ),
                PluginSettingSpec(
                    field_name="simpan_ke_file",
                    label="Simpan Hasil ke File?",
                    type="bool",
                    default=False,
                    tooltip="Centang jika ingin menyimpan hasil scrape ke file."
                ),
                PluginSettingSpec(
                    field_name="folder_output",
                    label="Folder Output",
                    type="folderpath",
                    default="", # Biasanya akan diisi dari app_settings
                    tooltip="Pilih folder tempat file output akan disimpan.",
                    required=False # Mungkin tidak wajib jika simpan_ke_file False
                )
            ]
    ```

#### **3. `run(self, data_payload: DataPayload, app_settings: Dict[str, Any]) -> DataPayload` (Wajib)**

  * **Tujuan:** Ini adalah jantung dari plugin Anda. Metode ini berisi logika utama yang akan dieksekusi saat plugin berjalan dalam alur kerja.

  * **Parameter:**

      * `data_payload: DataPayload`: Ini adalah objek `DataPayload` yang masuk ke plugin Anda. Ini berisi semua data yang telah diproses oleh plugin-plugin sebelumnya dalam alur kerja. Anda akan membaca dari sini dan memodifikasinya.
          * `data_payload.articles: List[Article]`: Daftar objek `Article`. Setiap `Article` dapat memiliki `title`, `url`, `raw_content`, `filtered_content`, `image_paths`, `audio_path`, `video_clip_path`, dan `metadata`.
          * `data_payload.metadata: Dict[str, Any]`: Metadata umum yang berlaku untuk seluruh `DataPayload`.
          * `data_payload.global_background_video_path`, `data_payload.global_music_track_path`: Jalur ke aset media global.
          * `data_payload.last_plugin_status: Dict[str, Any]`: Status output dari plugin sebelumnya yang telah dieksekusi dalam alur kerja (sering digunakan dalam langkah kondisional).
          * `data_payload.workflow_global_data: Dict[str, Any]`: Data yang ditetapkan sebagai "global" untuk seluruh eksekusi alur kerja.
          * `data_payload.trigger_info: Dict[str, Any]`: Informasi tentang pemicu (misalnya, jalur file yang baru dibuat) jika alur kerja dipicu oleh Smart Trigger.
      * `app_settings: Dict[str, Any]`: Sebuah kamus yang berisi semua pengaturan aplikasi global FlowForge. Ini sangat berguna karena Anda dapat mengakses:
          * `app_settings['global_variables']`: Kamus yang berisi variabel global yang dikelola pengguna di tab "Setting" (termasuk rahasia yang didekripsi).
          * `app_settings['output_folder']`: Folder output utama yang dikonfigurasi pengguna.
          * `app_settings['db_manager']`: Referensi ke instance `DbManager` untuk berinteraksi dengan database riwayat.
          * `app_settings['error_logger']`: Referensi ke instance `ErrorLogger` untuk mencatat error kritis.
          * `app_settings['settings_manager']`: Referensi ke instance `SettingsManager` untuk mengakses pengaturan aplikasi lainnya.
          * `app_settings['state_manager']`: Referensi ke instance `StateManager` untuk mengakses atau mengubah status global persisten (misalnya, `total_workflow_runs`).
          * `app_settings['app_instance']`: Referensi ke instance `MainApp` itu sendiri (gunakan dengan hati-hati untuk interaksi GUI dari plugin).

  * **Mengembalikan:** Objek `DataPayload` yang diperbarui. Anda harus memodifikasi `data_payload` yang masuk dan mengembalikannya.

  * **Alur Kerja Umum dalam `run()`:**

    1.  **Akses Pengaturan:** Ambil nilai pengaturan dari `self.settings`.
    2.  **Akses Data Input:** Ambil data dari `data_payload` yang masuk.
    3.  **Lakukan Logika Bisnis:** Lakukan operasi utama plugin (scrape web, memproses teks, memanipulasi gambar, mengirim email, dll.).
    4.  **Perbarui `DataPayload`:** Tambahkan data baru (misalnya, `Article` baru), modifikasi `Article` yang sudah ada, tambahkan metadata.
    5.  **Catat Status Plugin:** Perbarui `data_payload.last_plugin_status` dengan hasil eksekusi plugin Anda (`"success": True/False`, `"message": "..."`, dll.). Ini penting untuk langkah kondisional berikutnya.
    6.  **Akses Layanan Aplikasi:** Gunakan `app_settings` untuk berinteraksi dengan `db_manager`, `error_logger`, `settings_manager`, `state_manager` jika diperlukan.
    7.  **Laporkan Progres:** Gunakan `self.report_progress()` untuk umpan balik UI.
    8.  **Catat Log:** Gunakan `self._log()` untuk pesan diagnostik.
    9.  **Kembalikan `DataPayload` yang Dimodifikasi.**

  * **Contoh Plugin Scrape Sederhana (nama\_file\_plugin\_anda.py):**
    Ini adalah contoh plugin yang melakukan scraping teks dari URL, lalu menyimpannya sebagai artikel dan juga mencatat status.

    ```python
    # plugins/WebScraping/SimpleScraper/simple_scraper_plugin.py

    from plugins.base_plugin import BasePlugin
    from core.data_models import DataPayload, PluginSettingSpec, Article
    from typing import Any, Dict, List, Optional
    import requests
    from bs4 import BeautifulSoup # Membutuhkan BeautifulSoup4

    class SimpleScraperPlugin(BasePlugin):
        def __init__(self):
            super().__init__(name="Scraper Sederhana", description="Mengambil judul dan konten dari URL.")
            self.settings = {
                "target_url": "",
                "css_selector_konten": "body", # Default: ambil seluruh body
                "simpan_ke_db": True
            }

        def get_gui_config_spec(self) -> List[PluginSettingSpec]:
            return [
                PluginSettingSpec(
                    field_name="target_url",
                    label="URL Target Scraping",
                    type="str",
                    default=self.settings["target_url"],
                    placeholder="Contoh: https://id.wikipedia.org/wiki/Python",
                    tooltip="URL halaman web yang akan di-scrape.",
                    required=True
                ),
                PluginSettingSpec(
                    field_name="css_selector_konten",
                    label="CSS Selector Konten",
                    type="str",
                    default=self.settings["css_selector_konten"],
                    placeholder="Misal: #bodyContent p",
                    tooltip="CSS Selector untuk elemen yang berisi konten utama. Default: 'body' (seluruh halaman).",
                    required=False
                ),
                PluginSettingSpec(
                    field_name="simpan_ke_db",
                    label="Simpan ke Database?",
                    type="bool",
                    default=self.settings["simpan_ke_db"],
                    tooltip="Centang jika hasil scrape ingin disimpan ke database riwayat."
                )
            ]

        def validate_settings(self) -> bool:
            url = self.settings.get("target_url")
            if not url or not (url.startswith("http://") or url.startswith("https://")):
                self._log("ERROR", "URL Target Scraping tidak valid atau kosong. Harus dimulai dengan http:// atau https://")
                return False
            self._log("INFO", "Pengaturan Scraper Sederhana divalidasi.")
            return True

        def run(self, data_payload: DataPayload, app_settings: Dict[str, Any]) -> DataPayload:
            self._log(f"Memulai eksekusi {self.name} untuk URL: {self.settings['target_url']}")
            self.report_progress(0, 100, "Mengambil halaman web...")

            target_url = self.settings["target_url"]
            css_selector_konten = self.settings["css_selector_konten"]
            simpan_ke_db = self.settings["simpan_ke_db"]

            try:
                # Mengambil halaman web
                response = requests.get(target_url, timeout=15)
                response.raise_for_status() # Akan memicu HTTPError untuk status kode 4xx/5xx
                self.report_progress(30, 100, "Halaman web berhasil diambil.")

                # Parsing HTML
                soup = BeautifulSoup(response.text, 'html.parser')
                title = soup.title.string if soup.title else "Judul Tidak Ditemukan"
                
                # Mengambil konten berdasarkan CSS selector
                content_element = soup.select_one(css_selector_konten)
                raw_content = content_element.get_text(separator='\n', strip=True) if content_element else "Konten tidak ditemukan dengan selector ini."
                
                self.report_progress(70, 100, "Konten berhasil di-parse.")

                # Membuat atau memperbarui objek Article
                new_article = Article(
                    title=title,
                    url=target_url,
                    raw_content=raw_content,
                    filtered_content=raw_content # Untuk contoh ini, filtered_content sama
                )

                # Menambahkan atau memperbarui artikel dalam data_payload
                if not data_payload.articles:
                    data_payload.articles.append(new_article)
                else:
                    data_payload.articles[0] = new_article # Perbarui artikel pertama jika sudah ada

                # Menyimpan ke database riwayat jika diminta
                if simpan_ke_db:
                    db_manager = app_settings.get('db_manager')
                    if db_manager:
                        db_manager.add_article_history(
                            article_id=new_article.id,
                            title=new_article.title,
                            url=new_article.url,
                            status="Sukses",
                            source_plugin=self.name
                        )
                        self._log("INFO", "Hasil scrape berhasil disimpan ke database riwayat.")
                    else:
                        self._log("WARNING", "DbManager tidak tersedia. Hasil scrape tidak disimpan ke database.")

                # Mencatat status plugin
                data_payload.last_plugin_status[self.name] = {
                    "success": True,
                    "message": f"URL '{target_url}' berhasil di-scrape.",
                    "scraped_title": title
                }
                self.report_progress(100, 100, "Scraping selesai.")
                self._log("INFO", f"Scraping dari {target_url} selesai.")

            except requests.exceptions.RequestException as e:
                self._log("ERROR", f"Gagal mengambil URL '{target_url}': {e}")
                data_payload.last_plugin_status[self.name] = {
                    "success": False,
                    "error_message": f"Gagal mengambil URL: {e}"
                }
            except Exception as e:
                self._log("ERROR", f"Terjadi kesalahan tak terduga saat scraping: {e}")
                data_payload.last_plugin_status[self.name] = {
                    "success": False,
                    "error_message": f"Kesalahan internal plugin: {e}"
                }
            
            return data_payload

    ```

      * **`plugin_manifest.json` untuk Scraper Sederhana:**

        ```json
        {
          "plugin_name": "Scraper Sederhana",
          "version": "1.0.0",
          "developer": "Awen Audico / FlowForge Team",
          "description": "Mengambil judul dan konten utama dari halaman web berdasarkan URL dan CSS Selector. Dapat menyimpan ke database riwayat.",
          "permissions": {
            "network_access": "Plugin ini memerlukan akses internet untuk mengambil data dari URL yang ditentukan.",
            "file_write": "Plugin ini dapat menulis data ke database SQLite lokal."
          }
        }
        ```

      * **`requirements.txt` untuk Scraper Sederhana:**

        ```
        requests
        beautifulsoup4
        ```

### **Menerapkan Variabel Global pada Plugin (Contoh)**

Anda dapat membuat variabel global di tab "Setting" FlowForge (misalnya, `API_KEY` atau `DEFAULT_USER`). Plugin Anda dapat mengaksesnya melalui `app_settings`.

  * **Di FlowForge UI:**

      * Buka tab "Setting".
      * Pilih sub-tab "Variabel Global".
      * Klik "Tambah Baru".
      * Buat `KEY`: `MY_API_KEY`, `VALUE`: `ini_adalah_kunci_rahasia_saya`, `is_secret`: `True`.
      * Buat `KEY`: `DEFAULT_SOURCE`, `VALUE`: `Website X`, `is_secret`: `False`.

  * **Dalam Plugin Anda (`run()` method):**

    ```python
    # Lanjutan dari run() method plugin Anda
    # ...
    # Mengakses variabel global
    global_variables = app_settings.get('global_variables', {})

    my_api_key = global_variables.get("MY_API_KEY")
    default_source = global_variables.get("DEFAULT_SOURCE")

    if my_api_key:
        self._log(f"Menggunakan API Key (disembunyikan): {'*' * len(my_api_key)}")
        # Lakukan sesuatu dengan API Key
    else:
        self._log("WARNING", "Variabel global 'MY_API_KEY' tidak ditemukan atau kosong.")

    self._log(f"Sumber default yang diambil dari variabel global: {default_source}")

    # Anda juga bisa memperbarui StateManager global jika diperlukan
    state_manager = app_settings.get('state_manager')
    if state_manager:
        state_manager.increment_state("total_api_calls", 1)
        self._log(f"Total panggilan API: {state_manager.get_state('total_api_calls')}")
    # ...
    ```

### **Membuat Tab Kustom dengan Plugin (Contoh Lanjutan)**

Jika plugin Anda sangat kompleks atau memiliki interaksi pengguna yang unik, Anda dapat membuat tab UI khusus untuknya.

  * **Di `nama_file_plugin_anda.py`:**

    ```python
    # plugins/Utility/CustomCalculator/custom_calculator_plugin.py

    from plugins.base_plugin import BasePlugin
    from core.data_models import DataPayload, PluginSettingSpec
    from typing import Any, Dict, List, Optional, Callable
    import ttkbootstrap as ttk
    import tkinter as tk

    class CustomCalculatorPlugin(BasePlugin):
        def __init__(self):
            super().__init__(name="Kalkulator Kustom", description="Kalkulator sederhana dengan UI kustom.")
            self.settings = {
                "nilai1": 0,
                "nilai2": 0,
                "hasil_terakhir": 0
            }

        def get_gui_config_spec(self) -> List[PluginSettingSpec]:
            # Plugin ini tidak memiliki pengaturan di Workflow Editor karena punya UI sendiri
            return []

        def run(self, data_payload: DataPayload, app_settings: Dict[str, Any]) -> DataPayload:
            # Metode run() ini bisa saja tidak melakukan apa-apa atau mencatat sesuatu
            # karena interaksi utama ada di tab UI-nya.
            self._log("INFO", "Plugin Kalkulator Kustom dijalankan. Interaksi melalui tab UI.")
            data_payload.last_plugin_status[self.name] = {
                "success": True,
                "message": "Kalkulator Kustom aktif."
            }
            return data_payload

        def create_tab_ui(self, master: ttk.Notebook, app_instance: Any) -> Optional[ttk.Frame]:
            """
            Membuat tab UI kustom untuk plugin ini.
            """
            self.app_instance_ref = app_instance # Simpan referensi MainApp untuk akses logging/style
            self.style = app_instance.style # Akses style dari MainApp
            # Overide _log agar log dari tab ini masuk ke sistem log utama FlowForge
            self._log_callback = app_instance.log_message_to_queue

            tab_frame = ttk.Frame(master, padding=10)
            tab_frame.grid_columnconfigure(0, weight=1)
            tab_frame.grid_rowconfigure(4, weight=1) # Berikan weight pada baris tertentu

            # Widgets untuk UI kalkulator
            ttk.Label(tab_frame, text="Kalkulator Sederhana", font=("Arial", 14, "bold")).grid(row=0, column=0, pady=10)

            ttk.Label(tab_frame, text="Nilai 1:").grid(row=1, column=0, sticky="w", padx=5, pady=2)
            self.entry_nilai1 = ttk.Entry(tab_frame)
            self.entry_nilai1.grid(row=1, column=0, sticky="ew", padx=100) # Pastikan Entry memenuhi kolom
            self.entry_nilai1.insert(0, str(self.settings["nilai1"]))

            ttk.Label(tab_frame, text="Nilai 2:").grid(row=2, column=0, sticky="w", padx=5, pady=2)
            self.entry_nilai2 = ttk.Entry(tab_frame)
            self.entry_nilai2.grid(row=2, column=0, sticky="ew", padx=100)
            self.entry_nilai2.insert(0, str(self.settings["nilai2"]))

            ttk.Button(tab_frame, text="Jumlahkan", command=self._lakukan_penjumlahan, bootstyle="success").grid(row=3, column=0, pady=10)

            ttk.Label(tab_frame, text="Hasil Terakhir:").grid(row=4, column=0, sticky="w", padx=5, pady=2)
            # Menggunakan Text widget untuk hasil karena bisa lebih fleksibel
            self.text_hasil = tk.Text(tab_frame, wrap=tk.WORD, height=3, state='disabled', font=("Consolas", 10))
            self.text_hasil.grid(row=5, column=0, sticky="nsew", padx=5, pady=5)
            self.text_hasil.insert(tk.END, str(self.settings["hasil_terakhir"]))


            self._log("INFO", "Tab UI Kalkulator Kustom berhasil dibuat.")
            return tab_frame

        def _lakukan_penjumlahan(self):
            try:
                nilai1 = float(self.entry_nilai1.get())
                nilai2 = float(self.entry_nilai2.get())
                hasil = nilai1 + nilai2
                self.settings["nilai1"] = nilai1 # Simpan ke pengaturan
                self.settings["nilai2"] = nilai2
                self.settings["hasil_terakhir"] = hasil

                self.text_hasil.config(state='normal')
                self.text_hasil.delete(1.0, tk.END)
                self.text_hasil.insert(tk.END, f"Hasil: {hasil}")
                self.text_hasil.config(state='disabled')
                self._log("INFO", f"Penjumlahan berhasil: {nilai1} + {nilai2} = {hasil}")

                # Anda bisa memicu alur kerja lain dari sini jika diperlukan
                # Contoh: self.app_instance_ref.queue_workflow(some_preset.steps, {"enabled":False})

            except ValueError:
                self._log("ERROR", "Input bukan angka. Harap masukkan angka yang valid.", source=self.name)
                messagebox.showerror("Input Invalid", "Harap masukkan angka yang valid untuk penjumlahan.", parent=self.app_instance_ref)
            except Exception as e:
                self._log("CRITICAL", f"Kesalahan tak terduga dalam kalkulator: {e}", source=self.name)
                messagebox.showerror("Error", f"Terjadi kesalahan: {e}", parent=self.app_instance_ref)

    ```

  * **`plugin_manifest.json` untuk Kalkulator Kustom:**

    ```json
    {
      "plugin_name": "Kalkulator Kustom",
      "version": "1.0.0",
      "developer": "Awen Audico / FlowForge Team",
      "description": "Sebuah kalkulator sederhana dengan antarmuka pengguna kustom yang muncul sebagai tab terpisah di FlowForge.",
      "permissions": {
        "user_interface_interaction": "Plugin ini menyediakan antarmuka pengguna interaktif sebagai tab khusus."
      }
    }
    ```

### **Siklus Hidup Plugin dalam FlowForge**

1.  **Deteksi:** `PluginManager` memindai folder `plugins/` saat FlowForge dimulai.
2.  **Pemuatan:** Jika struktur folder dan file Python benar, `PluginManager` memuat kelas plugin dan membuat `PluginConfig` darinya.
3.  **Inisialisasi (sekali):** Ketika FlowForge perlu menggunakan plugin (misalnya, untuk menampilkan pengaturan di Workflow Editor, atau untuk membuat tab UI kustom), `PluginManager` membuat satu instance dari kelas plugin tersebut.
4.  **Konfigurasi UI:** FlowForge memanggil `get_gui_config_spec()` untuk membangun form pengaturan. Pengaturan yang dikonfigurasi pengguna disimpan ke `self.settings` plugin.
5.  **Eksekusi (`run()`):** Ketika alur kerja dijalankan, metode `run()` dari instance plugin dipanggil dengan `DataPayload` yang sudah ada dan `app_settings` global. Di sinilah semua logika inti plugin Anda berjalan.
6.  **Tab UI Kustom:** Jika `create_tab_ui()` diimplementasikan, FlowForge akan membuat tab baru di aplikasi untuk plugin tersebut.

### **Tips Tambahan untuk Pengembangan Plugin**

  * **Logging adalah Kunci:** Gunakan `self._log()` secara ekstensif untuk memahami apa yang terjadi di plugin Anda. Lihat tab "Log Aplikasi" di Dashboard untuk melihat outputnya.
  * **Error Handling yang Baik:** Selalu sertakan `try-except` dalam logika Anda, terutama saat berinteraksi dengan sumber eksternal (API, file, web scraping).
  * **Laporkan Progres:** Untuk plugin yang berjalan lama, `self.report_progress()` memberikan pengalaman pengguna yang jauh lebih baik.
  * **Manfaatkan `DataPayload`:** Pahami cara `DataPayload` bekerja. Ini adalah cara plugin berkomunikasi satu sama lain dalam alur kerja. Gunakan `Article`, `metadata`, dan `last_plugin_status` secara efektif.
  * **Gunakan `app_settings` dengan Bijak:** `app_settings` adalah pintu gerbang Anda ke seluruh aplikasi. Gunakan `db_manager` untuk menyimpan riwayat, `settings_manager` untuk mengakses pengaturan aplikasi lainnya, dan `error_logger` untuk mencatat error kritis yang tidak boleh diabaikan.
  * **Enkripsi Rahasia:** Jangan pernah *hardcode* API Key atau data sensitif lainnya dalam plugin Anda. Gunakan fitur "Variabel Global" di FlowForge UI dan tandai sebagai "Rahasia" (`is_secret=True`). Plugin Anda kemudian dapat membacanya dari `app_settings['global_variables']` dan FlowForge akan menanganinya dengan aman.
  * **Virtual Environment:** Selalu kembangkan dan uji plugin Anda di lingkungan virtual. FlowForge akan membuatnya untuk Anda saat instalasi, tetapi saat pengembangan manual, ini adalah praktik terbaik.
  * **Mulai dari yang Kecil:** Jika Anda baru memulai, buat plugin yang sangat sederhana terlebih dahulu (misalnya, plugin "Hello World" yang hanya mencatat pesan ke log), lalu secara bertahap tambahkan fungsionalitas yang lebih kompleks.

Ini adalah panduan yang sangat komprehensif untuk memulai dan mengembangkan plugin di FlowForge. Semoga ini memberikan semua detail yang Anda butuhkan, bro\!
